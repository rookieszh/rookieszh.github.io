---
title: Monte Carlo Programming
date: 2020-01-06 13:22:52
categories:
    - Mathematics
tags:
    - Statistics
description: "【有趣的数学系列】How to using the optimal stopping problem to select heterosex"
fancybox: true  # 图片浏览器
toc: true       # 文章目录
original: true  # 文末版权信息 
comments: true  # 文末评论
share: true     # 分享
---


找对象很容易陷入纳什均衡。
我们可以利用在数学上被称为“最优停止问题”，它有一个很巧妙的策略。

假设一个女生遇到了三个男生。如果她两眼一闭，随机选择，那有1/3的概率选到最优秀的男生。

但其实她还有一种先舍后得的策略：先跟第一个男生处一处，不管他好不好都果断分手；然后考察第二个男生，如果他比第一个男生优秀，就正式在一起；如果他不如第一个男生，那就分手，和第三个男生在一起。

这种策略看似耍流氓，但对于三个男生一共有6种排序，采用这种策略，我们以1为最好，3为最差，排查一下：
123，则舍弃1-舍弃2-选中3
132，则舍弃1-舍弃3-选中2
213，则舍弃2-选中1
231，则舍弃2-舍弃3-选中1
312，则舍弃3-选中1
321，则舍弃3-选中2

这样有1/2的概率选中最优秀的男生，1/3概率选到第二优秀的，1/6概率选到最差的。

所以鲁迅先生早就说过：初恋不值得！它只是寻找真爱的垫脚石。
情场老手一般都会先随意谈上几段恋情，观察一下整体情况，然后再做出决策。那么最好的策略是观察多少个人呢？
假设一共有n个人备选，你先观察观察前k个人，但都放弃，从第k+1个人开始，一旦遇到一个比前面都优秀的，就和他在一起。
我们来求一下k等于多少的时候， 我们有把握和最优秀的人在一起。
我们在小学二年级的时候就学过条件概率和黎曼和。设选到最优秀男生的概率P(k)，则有
![](蒙特卡罗编程-利用最优停止问题选择异性1.png)
在n较小时，直接一波非线性规划或者动态规划就能求解了，无非是在n!种情况中找出最优的情况。比如n=4的时候甚至可以直接穷举出最优解为k=1，概率P(1)=11/24。
![](蒙特卡罗编程-利用最优停止问题选择异性2.png)
假设你每年遇到的男生数量一样，如果找对象决策期是15岁到35岁，那22.4岁之前就是观察期，之后遇到更好的，就结婚！

我们来编个程模拟一下，首先生成一个女生，给她随机分配100个不同的男生。用蒙特卡罗模拟100万次。结果非常amazing！她有37%的概率选中最优秀的男生，14%的概率选中第二优秀的，7%概率选中第三优秀的。
![](蒙特卡罗编程-利用最优停止问题选择异性3.png)